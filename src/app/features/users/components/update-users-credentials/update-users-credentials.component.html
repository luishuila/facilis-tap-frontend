<div class="profile-content">

  <!-- Encabezado -->
  <div class="page-header">
    <h1>üîê Actualizar credenciales</h1>
    <p>Cambia tu usuario y contrase√±a</p>
  </div>

  <!-- Card contenedora -->
  <ion-card class="input-card">
    <ion-card-content>
      <form [formGroup]="credentialsForm" (ngSubmit)="updateCredentials()" class="form-stack">

        <!-- Usuario -->
        <fac-input
          formControlName="username"
          label="Usuario"
          type="text"
          placeholder="tu_usuario"
          icon="person">
        </fac-input>
        <p class="error-text"
           *ngIf="credentialsForm.get('username')?.invalid && (credentialsForm.get('username')?.touched || credentialsForm.get('username')?.dirty)">
          <ion-label class="red-text">
            {{ validationUsersService.getErrorMessage(credentialsForm, 'username') }}
          </ion-label>
        </p>

        <!-- Nueva contrase√±a -->
        <fac-input
          formControlName="password"
          label="Nueva contrase√±a"
          type="password"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          icon="lock-closed">
        </fac-input>
        <p class="error-text"
           *ngIf="credentialsForm.get('password')?.invalid && (credentialsForm.get('password')?.touched || credentialsForm.get('password')?.dirty)">
          <ion-label class="red-text">
            {{ validationUsersService.getErrorMessage(credentialsForm, 'password') }}
          </ion-label>
        </p>

        <!-- Confirmar contrase√±a -->
        <fac-input
          formControlName="confirmPassword"
          label="Confirmar contrase√±a"
          type="password"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          icon="lock-closed">
        </fac-input>
        <p class="error-text"
           *ngIf="credentialsForm.get('confirmPassword')?.invalid && (credentialsForm.get('confirmPassword')?.touched || credentialsForm.get('confirmPassword')?.dirty)">
          <ion-label class="red-text">
            {{ validationUsersService.getErrorMessage(credentialsForm, 'confirmPassword') }}
          </ion-label>
        </p>

        <!-- Validaci√≥n de coincidencia -->
        <p class="error-text"
           *ngIf="credentialsForm.hasError('mismatch') && (credentialsForm.get('confirmPassword')?.touched || credentialsForm.get('confirmPassword')?.dirty)">
          <ion-label class="red-text">
            {{ validationUsersService.getPasswordMismatchError(credentialsForm) }}
          </ion-label>
        </p>

        <!-- Espaciador para que no tape la barra fija -->
        <div class="bottom-spacer" aria-hidden="true"></div>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Barra de acci√≥n fija inferior -->
  <div class="sticky-actions">
    <fac-btn
      label="Actualizar"
      color="primary"
      customClass="primary-btn"
      expand="block"
      type="submit"
      [disabled]="credentialsForm.invalid"
      (clicked)="updateCredentials()">
    </fac-btn>
  </div>

</div>
