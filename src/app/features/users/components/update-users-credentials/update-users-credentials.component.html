<ion-content [fullscreen]="true">
  <ion-card class="input-card">
    <ion-card-content>
      <div class="container">
        <h1 class="heading">游댏 Actualizar Credenciales</h1>
        <p class="para">Cambia tu usuario y contrase침a</p>

        <form [formGroup]="credentialsForm" (ngSubmit)="updateCredentials()">

          <!-- Usuario -->
          <app-input 
            formControlName="username" 
            label="Usuario" 
            type="text" 
            placeholder="Ingrese su usuario" 
            icon="person">
          </app-input>
          <p class="error-text" *ngIf="credentialsForm.get('username')?.invalid && (credentialsForm.get('username')?.touched || credentialsForm.get('username')?.dirty)">
            <ion-label class="red-text">
              {{ validationUsersService.getErrorMessage(credentialsForm, 'username') }}
            </ion-label>
          </p>

          <!-- Nueva Contrase침a -->
          <app-input 
            formControlName="password" 
            label="Nueva Contrase침a" 
            type="password" 
            placeholder="Ingrese nueva contrase침a" 
            icon="lock-closed">
          </app-input>
          <p class="error-text" *ngIf="credentialsForm.get('password')?.invalid && (credentialsForm.get('password')?.touched || credentialsForm.get('password')?.dirty)">
            <ion-label class="red-text">
              {{ validationUsersService.getErrorMessage(credentialsForm, 'password') }}
            </ion-label>
          </p>

          <!-- Confirmar Contrase침a -->
          <app-input 
            formControlName="confirmPassword" 
            label="Confirmar Contrase침a" 
            type="password" 
            placeholder="Confirme su nueva contrase침a" 
            icon="lock-closed">
          </app-input>
          <p class="error-text" *ngIf="credentialsForm.get('confirmPassword')?.invalid && (credentialsForm.get('confirmPassword')?.touched || credentialsForm.get('confirmPassword')?.dirty)">
            <ion-label class="red-text">
              {{ validationUsersService.getErrorMessage(credentialsForm, 'confirmPassword') }}
            </ion-label>
          </p>

          <!-- Validaci칩n de Coincidencia -->
          <p class="error-text" *ngIf="credentialsForm.hasError('mismatch') && (credentialsForm.get('confirmPassword')?.touched || credentialsForm.get('confirmPassword')?.dirty)">
            <ion-label class="red-text">
              {{ validationUsersService.getPasswordMismatchError(credentialsForm) }}
            </ion-label>
          </p>

          <!-- Bot칩n de Actualizar -->
          <app-btn 
            label="Actualizar" 
            color="primary" 
            customClass="primary-btn" 
            expand="block"
            type="submit"
            [disabled]="credentialsForm.invalid"
            (clicked)="updateCredentials()">  
          </app-btn>

          <p class="error-text" *ngIf="errorMessage">{{ errorMessage }}</p>

        </form>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
