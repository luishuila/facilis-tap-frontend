<fieldset class="input-item" [ngClass]="{ 'has-error': hasError }" *ngIf="!selectModal">
  <legend *ngIf="label">{{ label }}</legend>

  <ion-item class="custom-select" lines="none">
    <ion-icon *ngIf="icon" slot="start" [name]="icon"></ion-icon>

    <ion-select
      [placeholder]="placeholder"
      [(ngModel)]="value"
      (ionChange)="onSelectionChange($event)"
      [disabled]="disabled"
      interface="popover"
    >
      <ion-select-option
        *ngFor="let option of items"
        [value]="option[valueField]"
      >
        {{ option[labelField] }}
      </ion-select-option>
    </ion-select>
  </ion-item>
</fieldset>

<fieldset class="input-item" [ngClass]="{ 'has-error': hasError }" *ngIf="selectModal">
  <legend *ngIf="label">{{ label }}</legend>

  <ion-item class="custom-select" button id="select-modal-trigger">
    <ion-icon *ngIf="icon" slot="start" [name]="icon"></ion-icon>
    <ion-label>{{ selectedText || placeholder }}</ion-label>
  </ion-item>
</fieldset>

<ion-modal trigger="select-modal-trigger" #modal *ngIf="selectModal">
  <ng-template>
    <fac-modal-select
      class="ion-page"
      [title]="title"
      [items]="items"
      [textField]="labelField"
      [valueField]="valueField"
      [selectedItems]="selectedItems"
      (selectionChange)="onSelectionChangeModal($event)"
      (selectionCancel)="modal.dismiss()"
    ></fac-modal-select>
  </ng-template>
</ion-modal>
