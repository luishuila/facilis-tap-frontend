<div class="profile-content">

  <!-- Encabezado -->
  <div class="page-header">
    <h1>
      🏢 {{ isUpdate ? 'Actualizar Proveedor' : 'Registrar Proveedor' }}
    </h1>
    <p>
      {{ isUpdate ? 'Actualiza la información del proveedor.' : 'Ingrese la información del proveedor.' }}
    </p>
  </div>

  <!-- Avatar -->
  <div class="avatar-center">
    <fac-avatar
      [avatarUrl]="avatarPreview || 'https://picsum.photos/600/300?random=18'"
      mode="edit"
      (imageSelected)="onImageFileSelected($event)">
    </fac-avatar>
  </div>

  <!-- Formulario en grid -->
  <form [formGroup]="providerForm" (ngSubmit)="onSubmit()" class="form-grid">

    <div class="full" *ngIf="independent">
      <fac-radio
        label="Presta servicios"
        icon="construct-outline"
        [options]="contributor"
        formControlName="independent">
      </fac-radio>
    </div>

    <div class="col">
      <fac-input formControlName="name" label="Nombre" type="text"
        placeholder="Ingrese el nombre del proveedor" icon="person"></fac-input>
    </div>

    <div class="col">
      <fac-input formControlName="email" label="Correo electrónico" type="email"
        placeholder="ejemplo@correo.com" icon="mail"></fac-input>
    </div>

    <div class="col">
      <fac-input formControlName="phone" label="Teléfono" type="tel"
        placeholder="+57 321 1234567" icon="call"></fac-input>
    </div>

    <div class="col">
      <fac-input formControlName="website" label="Sitio web" type="url"
        placeholder="https://example.com" icon="globe"></fac-input>
    </div>

    <div class="full">
      <fac-input formControlName="img" label="Imagen URL" type="url"
        placeholder="https://example.com/logo.png" icon="image"></fac-input>
    </div>

    <ng-container *ngIf="!providerForm.get('independent')?.value">
      <div class="col">
        <fac-input formControlName="nit" label="NIT" type="number"
          placeholder="Ingrese el NIT" icon="business"></fac-input>
      </div>

      <div class="col">
        <fac-input formControlName="invima" label="Invima"
          placeholder="Ingrese el código Invima" icon="clipboard"></fac-input>
      </div>

      <div class="full">
        <fac-input formControlName="companyIdentifier" label="Identificador de empresa"
          placeholder="Ingrese el identificador" icon="pricetag"></fac-input>
      </div>
    </ng-container>

    <div class="full">
      <fac-textarea formControlName="description" label="Descripción"
        placeholder="Ingrese una descripción" icon="document-text"></fac-textarea>
    </div>

    <div class="full">
      <fac-select
        label="Servicios"
        title="Seleccione servicios"
        [items]="selectModal"
        [labelField]="'name'"
        [valueField]="'id'"
        [selectedItems]="providerForm.get('categories')?.value"
        [selectModal]="true"
        (selectionChange)="onServicesChanged($event)"
        formControlName="categories">
      </fac-select>
    </div>

    <div class="full">
      <fac-file
        mode="image"
        [multiple]="false"
        [maxSizeMB]="200"
        [maxFiles]="1"
        (itemsChange)="onImg($event)">
      </fac-file>
    </div>

    <!-- CTA -->
    <div class="full bottom-spacer" aria-hidden="true">
      <fac-btn
        [label]="isUpdate ? 'Actualizar' : 'Registrar'"
        [icon]="isUpdate ? 'refresh-outline' : 'save-outline'"
        color="primary"
        customClass="primary-btn"
        expand="block"
        type="submit">
      </fac-btn>
    </div>

  </form>
</div>
