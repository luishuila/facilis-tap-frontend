<div class="profile-content">
  <!-- Encabezado -->
  <div class="page-header">
    <h1>📍 {{ isUpdate ? 'Actualizar dirección' : 'Registrar dirección' }}</h1>
    <p>{{ isUpdate ? 'Actualiza la información de tu dirección' : 'Ingresa la información de tu dirección' }}</p>
  </div>

  <form [formGroup]="addressForm" (ngSubmit)="saveAddress()" class="form-grid">
    <!-- Columna A -->
    <div class="col">

      <!-- País -->
      <fac-select
        formControlName="countryCode"
        label="País"
        placeholder="Selecciona un país"
        icon="globe"
        [valueField]="'countryCode'"
        [labelField]="'countryName'"
        [items]="countries"
        [disabled]="isDisabled">
      </fac-select>

      <!-- Departamento/Estado -->
      <fac-select
        formControlName="stateCode"
        label="Departamento/Estado"
        placeholder="Selecciona un departamento"
        icon="map"
        [valueField]="'stateCode'"
        [labelField]="'stateName'"
        [items]="departments"
        [disabled]="isDisabled || !addressForm?.value?.countryCode">
      </fac-select>

      <!-- Ciudad -->
      <fac-select
        formControlName="cityStates"
        label="Ciudad"
        placeholder="Selecciona una ciudad"
        icon="location"
        [valueField]="'id'"
        [labelField]="'cityName'"
        [items]="cities"
        [disabled]="isDisabled || !addressForm?.value?.stateCode">
      </fac-select>

      <!-- Tipo de propiedad -->
      <fac-select
        formControlName="propertyType"
        label="Tipo de propiedad"
        placeholder="Selecciona una opción"
        icon="home"
        [items]="propertyType"
        [disabled]="isDisabled">
      </fac-select>
    </div>

    <!-- Columna B -->
    <div class="col">
      <div class="row-2">
        <fac-input formControlName="lat" label="Latitud"  type="text" placeholder="Ej: 4.6097"   icon="location"></fac-input>
        <fac-input formControlName="lon" label="Longitud" type="text" placeholder="Ej: -74.0817" icon="navigate"></fac-input>
      </div>

      <div class="row-2">
        <fac-input formControlName="street" label="Calle"   type="text" placeholder="Ej: Calle 123"   icon="business"></fac-input>
        <fac-input formControlName="race"   label="Carrera" type="text" placeholder="Ej: Carrera 45"  icon="navigate"></fac-input>
      </div>

      <div class="row-2">
        <fac-input formControlName="neighborhood" label="Barrio"        type="text"   placeholder="Ej: Chapinero" icon="home"></fac-input>
        <fac-input formControlName="zipcode"      label="Código postal" type="number" placeholder="Ej: 110111"    icon="mail-open"></fac-input>
      </div>
    </div>

    <!-- Descripción -->
    <div class="full">
      <fac-textarea
        formControlName="description"
        label="Descripción (opcional)"
        placeholder="Detalles adicionales sobre la dirección"
        icon="document-text">
      </fac-textarea>
    </div>

    <!-- Botón -->
    <div class="full bottom-spacer" aria-hidden="true">
    <fac-btn
        [label]="isUpdate ? 'Actualizar dirección' : 'Guardar dirección'"
        [icon]="isUpdate ? 'refresh-outline' : 'save-outline'"
        color="primary"
        customClass="primary-btn"
        expand="block"
        type="submit"
        [disabled]="isDisabled || addressForm.invalid">
      </fac-btn>
    </div>
  </form>
</div>
