<fieldset 
  class="fac-field" 
  [class.has-error]="hasError" 
  [class.disabled]="disabled">

  <!-- Etiqueta -->
  <legend *ngIf="label">{{ label }}</legend>

  <!-- Campo de entrada -->
  <ion-item class="field-item" lines="none">
    <!-- Icono al inicio -->
    <ion-icon 
      *ngIf="icon" 
      slot="start" 
      [name]="icon" 
      aria-hidden="true">
    </ion-icon>

    <!-- Input -->
    <ion-input
      class="input-element"
      [type]="inputType"
      [placeholder]="placeholder"
      [value]="value"
      [clearInput]="clearable"
      [inputmode]="inputmode"
      [autocomplete]="autocomplete"
      [maxlength]="maxlength || null"
      [disabled]="disabled"
      (ionInput)="onIonInput($event)"
      (ionBlur)="onBlur()"
      [attr.aria-invalid]="hasError ? 'true' : 'false'"
      [attr.aria-describedby]="hasError ? formControlName + '-error' : null">
    </ion-input>

    <!-- Bot칩n mostrar/ocultar contrase침a -->
    <ion-button
      *ngIf="type === 'password'"
      slot="end"
      fill="clear"
      size="small"
      class="password-toggle"
      (click)="togglePasswordVisibility()"
      [attr.aria-label]="isPasswordVisible ? 'Ocultar contrase침a' : 'Mostrar contrase침a'">
      <ion-icon [name]="isPasswordVisible ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
    </ion-button>
  </ion-item>

  <!-- Mensajes de ayuda o error -->
  <div class="hint-row">
    <ion-note class="helper" *ngIf="!hasError && helperText">
      {{ helperText }}
    </ion-note>
    <ion-note 
      class="error" 
      *ngIf="hasError" 
      [id]="formControlName + '-error'">
      {{ errorMessage }}
    </ion-note>
  </div>
</fieldset>
