<ion-header [translucent]="true">
  <!-- Toolbar principal -->
  <ion-toolbar class="toolbar-main">
    <ion-title>Gestión de Proveedor</ion-title>
  </ion-toolbar>

  <!-- iOS: título grande al hacer scroll -->
  <!-- <ion-toolbar collapse="condense" class="toolbar-condense">
    <ion-title size="large">Gestión de Proveedor</ion-title>
  </ion-toolbar> -->

  <!-- Segment principal bajo el header -->
  <ion-toolbar class="toolbar-segment">
    <ion-segment [(ngModel)]="selectedSegment" class="tab-segment">
      <ion-segment-button value="first" *ngIf="userValidate || addressValidate">
        <ion-icon name="person-circle-outline"></ion-icon>
        <ion-label>Datos</ion-label>
      </ion-segment-button>

      <ion-segment-button value="register" [class.disabled-segment]="userValidate || addressValidate">
        <ion-icon name="briefcase-outline"></ion-icon>
        <ion-label>Proveedor</ion-label>
      </ion-segment-button>

      <ion-segment-button value="addressProvider" [class.disabled-segment]="userValidate || addressValidate">
        <ion-icon name="navigate-outline"></ion-icon>
        <ion-label>Dirección</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

  <!-- Sub-segment solo cuando estás en "first" -->
  <ion-toolbar *ngIf="selectedSegment === 'first'" class="toolbar-subsegment">
    <ion-segment [(ngModel)]="subSegment" class="tab-subsegment">
      <ion-segment-button value="usersId" *ngIf="userValidate">
        <ion-label>Usuario</ion-label>
      </ion-segment-button>

      <ion-segment-button value="addressId" *ngIf="addressValidate" [class.disabled-segment]="userValidate">
        <ion-label>Dirección</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content class="profile-content" [fullscreen]="true">
  <div class="tab-content">
    <!-- Datos personales -->
    <ng-container *ngIf="selectedSegment === 'first'">
      <div *ngIf="subSegment === 'usersId' && userValidate">
        <app-update-users-information
          *ngIf="validateUsers"
          [userForm]="userForm"
          [genderOptions]="genderOptions"
          (userSaved)="onUserSaved($event)">
        </app-update-users-information>
      </div>

      <div *ngIf="subSegment === 'addressId' && addressValidate">
        <app-address-form
          *ngIf="validate"
          [addressForm]="addressForm"
          [propertyType]="propertyType"
          [isDisabled]="false"
          (addressSaved)="onAddressSaved($event)">
        </app-address-form>
      </div>
    </ng-container>

    <!-- Registrar proveedor -->
    <ng-container *ngIf="selectedSegment === 'register'">
      <app-provider-form
        [providerForm]="providerForm"
        [isDisabled]="false"
        [independent]="independent"
        (providerSaved)="onSegmentChanger($event, 1)">
      </app-provider-form>
    </ng-container>

    <!-- Dirección proveedor -->
    <ng-container *ngIf="selectedSegment === 'addressProvider'">
      <app-address-form
        *ngIf="validate"
        [addressForm]="addressProviderForm"
        [propertyType]="propertyType"
        [isDisabled]="addProveder"
        (addressSaved)="onSegmentChanger($event, 2)">
      </app-address-form>
    </ng-container>
  </div>
</ion-content>
