:root{
  /* alturas de zonas “sticky” para calcular el viewport */
  --day-selector-h: 60px;
  --title-h: 44px;
}

/* layout base */
:host { display:block; height:100%; }
.schedule { display:flex; flex-direction:column; height:100%; background: #f2f2f7; }

/* ===== selector de días ===== */
.day-selector {
  position: sticky; top: 0; z-index: 5;
  background: #fff;
  border-bottom: 1px solid var(--ion-color-step-150, #e5e5ea);
  padding: 6px 0;
}

.day-segment { --background: transparent; --indicator-color: transparent; }
ion-segment-button { padding: 0; min-width: 72px; max-width: 72px; }

.day-card{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap: 2px;
  border-radius: 12px;
  padding: 8px 10px;
  background: #f1f2f6;
  transition: background .2s ease, color .2s ease;

  small{ font-size: 12px; color:#7d7d7d; line-height: 1; }
  strong{ font-size: 16px; color:#222; line-height: 1; }

  &.active{
    background: var(--ion-color-primary);
    small, strong { color: #fff; }
  }
}

/* ===== título ===== */
.section-title{
  position: sticky; top: var(--day-selector-h); z-index:4;
  margin: 0;
  padding: 12px 16px 8px;
  background:#fff;
  border-bottom: 1px solid var(--ion-color-step-150, #e5e5ea);
  font-size: 18px; font-weight: 700; color:#111;
}

/* ===== virtual scroll ===== */
.tasks-scroll{
  /* usar dvh para móviles con barra dinámica */
  height: calc(100dvh - var(--ion-safe-area-top, 0px) - var(--day-selector-h) - var(--title-h));
  min-height: 60vh; /* fallback */
  padding: 10px 12px 16px;
  background: var(--ion-color-step-100, #fafcff);
}

/* ===== card ===== */
ion-item.task-card{
  --background: #fff;
  border-radius: 14px;
  margin: 8px 0;
  padding: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,.05);
  display: flex;
  align-items: stretch;
}

.indicator{ width: 4px; border-radius: 4px; margin-right: 12px; }

.task-body{ flex:1; display:flex; flex-direction:column; }

.task-title-row{ display:flex; align-items:center; justify-content:space-between; }
.task-title{ font-size:16px; font-weight:600; color:#222; }

.task-meta{
  display:flex; align-items:center; gap:8px;
  margin: 2px 0 4px;
  .time{ font-size:14px; color:#666; }
  .tag{
    background:#e0ecff; color:#0051ff; font-size:12px;
    padding: 2px 8px; border-radius: 12px;
  }
}
.task-subtitle{ font-size:13px; color:#777; }

.book-btn{
  margin-top: 10px;
  --border-radius: 12px;
  /* MISMO COLOR que el día activo (primary) */
  --background: var(--ion-color-primary);
  --background-activated: var(--ion-color-primary-shade);
  --background-focused: var(--ion-color-primary-shade);
  --color: #fff;
}

/* tamaño consistente con itemSize */
.task-card{ min-height: 94px; }
